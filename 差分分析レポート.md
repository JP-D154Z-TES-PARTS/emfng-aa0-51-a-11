# 仕様書差分分析レポート

## 分析情報
- **分析日時**: 2025-10-17 06:07:22
- **Base Version**: emfng-aa0-50-a
- **New Version**: emfng-aa0-51-a
- **検出された差分数**: 6
- **分析対象**: 失火検出異常判定部（emf）仕様書

## エグゼクティブサマリー

本レポートは、baseフォルダ（emfng-aa0-50-a）とnewフォルダ（emfng-aa0-51-a）の仕様書を比較分析した結果をまとめたものです。

### 主要な変更点
1. **バージョン更新**: aa0-50-a → aa0-51-a
2. **c_matファイル差し替え要否の変更**: 「有」→「無（50-aより差し替え不要）」
3. **日付の更新**: 2025/6/30（45387.0）→ 2025/9/17（45936.0）
4. **ロジック変更シートの更新**: 新規シート「S51a」の追加および変更履歴の追加（1行）

### 比較対象ファイル

1. **D0emfng-aa0-50-a.doc** → **D0emfng-aa0-51-a.doc**
   - メイン仕様書ドキュメント（失火検出異常判定部 emf D.0）
   
2. **D0emfng-aa0-50-a(4).xls** → **D0emfng-aa0-51-a(4).xls**
   - 4気筒用仕様書補足資料
   - 条件: 【失火OBD有】AND【4気筒】
   
3. **D0emfng-aa0-50-a(6).xls** → **D0emfng-aa0-51-a(6).xls**
   - 6気筒用仕様書補足資料
   - 条件: 【失火OBD有】AND【6気筒】
   
4. **ロジック変更シート_ver9.06_emfng-aa0.xlsx** → **ロジック変更シート_ver9.09_emfng-aa0.xlsx**
   - ロジック変更管理シート（バージョン 9.06 → 9.09）
   - 歴史的な変更履歴を管理するシート（S41a～S51aの各バージョン）

## 詳細な差分分析

### D0emfng-aa0-50-a(4).xls（4気筒用仕様書）

**ファイル概要**: 
- 対象: 失火検出異常判定部（emf D.0）
- 条件: 【失火OBD有】AND【4気筒】
- シート構成: 「標準」シート (189行 x 15列)

**差分数**: 2

#### 差分 1: バージョン番号と日付の更新

- **シート**: 標準
- **行**: 2（ヘッダー部分）
- **変更内容**:
  - バージョン番号: `ｅｍｆｎｇ－ａａ０－５０－ａ` → `ｅｍｆｎｇ－ａａ０－５１－ａ`
  - 日付: `45387.0`（2025/6/30相当） → `45936.0`（2025/9/17相当）
- **影響**: バージョン管理上の更新、日付は約2.5ヶ月の経過

#### 差分 2: c_matファイル差し替え要否の変更

- **シート**: 標準
- **行**: 3（重要な仕様変更）
- **変更内容**:
  - Base: `c_matﾌｧｲﾙ差し替え　有`
  - New: `c_matﾌｧｲﾙ差し替え　無 (50-aより差し替え不要)`
- **影響**: **【重要】** c_matファイル（emfng_4_c_mat.c）の差し替えが不要になった
  - 50-aバージョンからの継続使用が可能
  - 実装上、ファイル差し替え作業が不要
  - ビルド・テスト工数への影響あり

### D0emfng-aa0-50-a(6).xls（6気筒用仕様書）

**ファイル概要**: 
- 対象: 失火検出異常判定部（emf D.0）
- 条件: 【失火OBD有】AND【6気筒】
- シート構成: 「標準」シート (193行 x 15列)

**差分数**: 2

#### 差分 1: バージョン番号と日付の更新

- **シート**: 標準
- **行**: 2（ヘッダー部分）
- **変更内容**:
  - バージョン番号: `ｅｍｆｎｇ－ａａ０－５０－ａ` → `ｅｍｆｎｇ－ａａ０－５１－ａ`
  - 日付: `45387.0`（2025/6/30相当） → `45936.0`（2025/9/17相当）
- **影響**: バージョン管理上の更新、4気筒版と同一の日付更新

#### 差分 2: c_matファイル差し替え要否の変更

- **シート**: 標準
- **行**: 3（重要な仕様変更）
- **変更内容**:
  - Base: `c_matﾌｧｲﾙ差し替え　有`
  - New: `c_matﾌｧｲﾙ差し替え　無 (50-aより差し替え不要)`
- **影響**: **【重要】** c_matファイル（emfng_6_c_mat.c）の差し替えが不要になった
  - 50-aバージョンからの継続使用が可能
  - 4気筒版と同様の変更
  - 実装上、ファイル差し替え作業が不要

### ロジック変更シート_ver9.06_emfng-aa0.xlsx → ver9.09

**ファイル概要**: 
- emfngロジック変更管理シート
- バージョン履歴: S41a～S51a（各バージョンの変更内容を記録）
- Base版シート数: 16シート
- New版シート数: 17シート（S51a追加）

**差分数**: 2

#### 差分 1: 新バージョンシート「S51a」の追加

- **変更タイプ**: 新規シート追加
- **追加されたシート**: `S51a`（aa0-51-a対応）
- **シート構成**: 258行 x 51列
- **内容**: ロジック変更シート（最新バージョンaa0-51-aの変更内容）
- **影響**: **【高】** 
  - aa0-51-a バージョンの新規仕様内容を含む
  - 後続タスク（実装・テスト）で詳細確認が必要
  - 適合方法・評価条件の確認が必須

#### 差分 2: 変更履歴の更新

- **シート**: 変更履歴
- **変更内容**:
  - Base行数: 24行（S50aまでの履歴）
  - New行数: 25行（S51aの履歴追加）
  - 追加行: 1行（S51aに関する変更履歴）
- **影響**: バージョン管理情報の正常な更新
  - S51a バージョンの変更内容・日付・担当者情報が追加
  - トレーサビリティの維持


## まとめ

本分析により、baseバージョン（emfng-aa0-50-a）からnewバージョン（emfng-aa0-51-a）への変更点を特定しました。

### 重要な変更点サマリー

1. **バージョン番号の更新**: aa0-50-a → aa0-51-a
   - 日付更新: 2025/6/30 → 2025/9/17（約2.5ヶ月経過）

2. **c_matファイル差し替え要否の変更**【最重要】
   - 4気筒版・6気筒版ともに「差し替え有」→「差し替え無」に変更
   - 実装への影響: emfng_4_c_mat.c および emfng_6_c_mat.c の差し替えが不要
   - 50-aバージョンのファイルを継続使用可能

3. **ロジック変更シートの更新**
   - バージョン: ver9.06 → ver9.09
   - 新規シート「S51a」の追加（258行 x 51列）
   - 変更履歴に1行追加

### 影響分析

#### ソースコード実装への影響
- c_matファイル（4気筒用・6気筒用）の差し替えが不要になったことで、実装工数削減
- 既存のbase版（50-a）のソースコードを継続利用可能
- ただし、S51aシートに記載された新規変更内容の確認と反映が必要

#### テストへの影響
- c_matファイル差し替え不要による回帰テストの削減可能性
- S51aシートに記載の変更内容に対する新規テストケース作成が必要
- 4気筒/6気筒両方の構成でのテスト確認

#### ドキュメントへの影響
- バージョン番号・日付の更新が必要
- c_matファイル取り扱いに関する説明の更新
- ロジック変更履歴の記録更新

## 推奨アクション

### 優先度：高
1. **ロジック変更シート「S51a」の詳細確認**
   - 258行の変更内容を精査
   - 実装に影響する変更点の特定
   - 適合方法・評価条件の確認

2. **c_matファイル差し替え不要の確認**
   - base版の emfng_4_c_mat.c、emfng_6_c_mat.c が51-aでも使用可能であることの検証
   - 互換性の確認

### 優先度：中
3. **後続タスク2（ソースコード変更実装）**
   - S51aの変更内容を反映
   - c_mat差し替え不要を前提とした実装
   - バージョン番号の更新

4. **後続タスク3（テストケース作成）**
   - S51aの変更点を網羅するテストケース作成
   - 4気筒/6気筒両構成でのテスト
   - 既存機能の回帰テスト

5. **後続タスク4（ドキュメント更新）**
   - バージョン情報の更新
   - c_matファイル取り扱い説明の更新
   - 変更履歴の記録

## 参照ドキュメント

- 差分分析レポート（本ドキュメント）
- 変更点一覧.md
- base/emfng-aa0-50-a_spec/ 配下の各仕様書
- new/emfng-aa0-51-a/ 配下の各仕様書
- ロジック変更シート S51a シート（要詳細確認）
